!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=16)}({10:function(e,t,n){"use strict";n.r(t),n.d(t,"serialize",function(){return s}),n.d(t,"createInstance",function(){return r}),n.d(t,"serializeSnippetData",function(){return a}),n.d(t,"deserializeSnippetData",function(){return i}),n.d(t,"ensureProperInstances",function(){return l});var o=n(2);function r(e,t=!1){if(console.log("[CREATE_INSTANCE] Input:",{data:e,isRoot:t,type:Array.isArray(e)?"array":typeof e}),!e)return console.warn("[CREATE_INSTANCE] No data provided"),null;if(Array.isArray(e))return console.log("[CREATE_INSTANCE] Legacy array format detected:",{firstElement:e[0],length:e.length}),o.a.fromArray(e,t);if("string"==typeof e&&("r"===e||"o"===e)){if(console.log("[CREATE_INSTANCE] String type identifier detected:",e),"r"===e){const e=new o.a(o.a.MAIN_SNIPPETS_NAME,[],Date.now());return e.type=o.b.FOLDER_TYPE,e}const t=new o.c("","",Date.now());return t.type=o.b.SNIP_TYPE,t}let n;if(n=e.list&&Array.isArray(e.list)?o.b.FOLDER_TYPE:void 0!==e.body?o.b.SNIP_TYPE:c(e.type),console.log("[CREATE_INSTANCE] Object format detected:",{type:n,name:e.name,isRoot:t,hasBody:void 0!==e.body,hasList:void 0!==e.list}),n===o.b.FOLDER_TYPE){const n=t?o.a.MAIN_SNIPPETS_NAME:e.name,s=new o.a(n,[],e.timestamp);return s.type=o.b.FOLDER_TYPE,e.list&&Array.isArray(e.list)&&e.list.forEach(e=>{const t=r(e,!1);t&&(t.type=t instanceof o.a?o.b.FOLDER_TYPE:o.b.SNIP_TYPE,s.list.push(t))}),s}if(n===o.b.SNIP_TYPE){const t=new o.c(e.name,e.body||"",e.timestamp);return t.type=o.b.SNIP_TYPE,t}return console.warn("[CREATE_INSTANCE] Unknown type:",n),null}function s(e){if(console.log("[SERIALIZE] Input:",null==e?void 0:e.type),!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(e=>s(e));if("string"==typeof e&&("r"===e||"o"===e))return{type:c(e),name:"r"===e?o.a.MAIN_SNIPPETS_NAME:"",timestamp:Date.now()};let t;const n={type:t=e instanceof o.a?o.b.FOLDER_TYPE:e instanceof o.c?o.b.SNIP_TYPE:e.list&&Array.isArray(e.list)?o.b.FOLDER_TYPE:void 0!==e.body?o.b.SNIP_TYPE:c(e.type),name:e.name||"",timestamp:e.timestamp||Date.now()};return t===o.b.FOLDER_TYPE?n.list=(e.list||[]).map(e=>s(e)):t===o.b.SNIP_TYPE&&(n.body=e.body||""),console.log("[SERIALIZE] Output:",n),n}function a(e){var t;return console.log("[SERIALIZE] Input:",{data:e,type:null==e||null===(t=e.constructor)||void 0===t?void 0:t.name,isFolder:e instanceof o.a,isSnip:e instanceof o.c}),e?e instanceof o.a?{name:e.name,type:o.b.FOLDER_TYPE,list:e.list.map(e=>a(e)),dateCreated:e.dateCreated}:e instanceof o.c?{name:e.name,body:e.body,type:o.b.SNIP_TYPE,dateCreated:e.dateCreated}:(console.warn("[SERIALIZE] Unknown data type:",e),e):null}function i(e){if(console.log("[DESERIALIZE] Input:",{data:e,type:Array.isArray(e)?"array":typeof e}),!e)return null;if(Array.isArray(e))return o.a.fromArray(e,!0);if("string"==typeof e){if("r"===e)return new o.a(o.a.MAIN_SNIPPETS_NAME,[],Date.now());if("o"===e)return new o.c("","",Date.now())}if("object"==typeof e){if(e.type===o.b.FOLDER_TYPE||e.list){return new o.a(e.name||o.a.MAIN_SNIPPETS_NAME,(e.list||[]).map(e=>i(e)),e.dateCreated||Date.now())}if(e.type===o.b.SNIP_TYPE||void 0!==e.body)return new o.c(e.name||"",e.body||"",e.dateCreated||Date.now())}return console.warn("[DESERIALIZE] Unknown data format:",e),e}function l(e){if(console.log("[ENSURE_PROPER_INSTANCES] Input:",e),!e)return console.warn("[ENSURE_PROPER_INSTANCES] No data provided"),e;if(e instanceof o.a||e instanceof o.c)return console.log("[ENSURE_PROPER_INSTANCES] Already a proper instance:",e.constructor.name),e;const t=r(e);return console.log("[ENSURE_PROPER_INSTANCES] Output:",t),t}const c=e=>{if(e===o.b.FOLDER_TYPE||e===o.b.SNIP_TYPE)return e;const t={r:o.b.FOLDER_TYPE,o:o.b.SNIP_TYPE,a:o.b.FOLDER_TYPE,i:o.b.SNIP_TYPE,folder:o.b.FOLDER_TYPE,snip:o.b.SNIP_TYPE}[e];return t||console.warn("[CONVERT_LEGACY_TYPE] Unknown type:",e),t||o.b.SNIP_TYPE}},16:function(e,t,n){"use strict";n.r(t);var o=n(8),r=n(2),s=n(10);chrome.storage.local;let a=null,i=!1,l=!1,c=!1,p="local";async function u(){try{return(await chrome.storage.local.get(o.b))[o.b]||"local"}catch(e){return console.error("Error getting storage type:",e),"local"}}async function d(e){try{await chrome.storage.local.set({[o.b]:e}),p=e}catch(e){console.error("Error setting storage type:",e)}}async function f(){try{await d("local");const e=(await chrome.storage.local.get(o.e))[o.e];return e&&!1===e.snippets&&await d("sync"),p}catch(e){return console.error("Error deciding storage type:",e),"local"}}function E(e,t,n=!1){const o=(new Date).toISOString(),s="[".concat(o,"] [DotExpander Debug] ").concat(e,": ").concat(JSON.stringify(t,(e,t)=>t instanceof r.a?"[Folder: ".concat(t.name,"]"):t instanceof r.c?"[Snip: ".concat(t.name,"]"):t,2));n?console.error(s):console.log(s)}const m="blockSite",y="snippet_main",h=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/,g="chunk_",S=7e3;const P=async()=>{try{var e,t,n;E("initializeData - Starting",null);const c=await f();E("initializeData - Storage type",{storageType:c}),(a=JSON.parse(JSON.stringify(o.f))).snippets=r.a.getDefaultSnippetData(),E("initializeData - Default data initialized",{hasData:!!a,hasSnippets:!(null===(e=a)||void 0===e||!e.snippets)});const p=await async function(){try{const e=chrome.storage[await f()],t=(await e.get("".concat(g,"metadata")))["".concat(g,"metadata")];if(!t)return console.log("[LOAD_CHUNKS] No chunked data found"),null;const n=Array.from({length:t.totalChunks},(e,t)=>"".concat(g).concat(t)),o=await e.get(n);let r="";for(let e=0;e<t.totalChunks;e++){const t=o["".concat(g).concat(e)];if(!t)throw new Error("Missing chunk ".concat(e));r+=t}if(r.length!==t.totalSize)throw new Error("Data size mismatch after combining chunks");return JSON.parse(r)}catch(e){return console.error("[LOAD_CHUNKS] Error:",e),null}}();if(p){var i;if(E("initializeData - Loaded chunked data",{hasStoredSnippets:!(null==p||!p.snippets),storedDataKeys:Object.keys(p)}),p.snippets)a.snippets=Object(s.deserializeSnippetData)(p.snippets),E("initializeData - Deserialized snippets",{isFolder:a.snippets instanceof r.a,rootName:null===(i=a.snippets)||void 0===i?void 0:i.name});for(const e in p)"snippets"!==e&&(a[e]=p[e])}var l;if(a.snippets)E("initializeData - Setting indices",{isFolder:a.snippets instanceof r.a,rootName:null===(l=a.snippets)||void 0===l?void 0:l.name}),r.a.setIndices(a.snippets);E("initializeData - Complete",{storageType:c,dataLoaded:!!a,hasSnippets:!(null===(t=a)||void 0===t||!t.snippets),isSnippetsFolder:(null===(n=a)||void 0===n?void 0:n.snippets)instanceof r.a})}catch(e){E("initializeData - Error",e,!0),(a=JSON.parse(JSON.stringify(o.f))).snippets=r.a.getDefaultSnippetData(),a.snippets&&r.a.setIndices(a.snippets)}};async function w(){try{var e;a.snippets instanceof r.a||(console.log("[SW] Converting snippets to Folder instance before save"),a.snippets=Object(s.deserializeSnippetData)(a.snippets));const t=Object(s.serializeSnippetData)(a.snippets);console.log("[SW] Serialized snippets:",{type:null==t?void 0:t.type,name:null==t?void 0:t.name,listLength:null==t||null===(e=t.list)||void 0===e?void 0:e.length,isPlainObject:(null==t?void 0:t.constructor)===Object});const n={...a,snippets:t};console.log("[SW] Saving data to storage:",{hasData:!!n,hasSnippets:!(null==n||!n.snippets),storageType:await f()});const i=await async function(e){try{const t=chrome.storage[await f()],n=JSON.stringify(e),o=[];for(let e=0;e<n.length;e+=S)o.push(n.slice(e,e+S));const r={totalChunks:o.length,totalSize:n.length,timestamp:Date.now()},s=await new Promise(e=>{t.get(null,t=>{e(Object.keys(t).filter(e=>e.startsWith(g)))})});s.length>0&&await t.remove(s);const a=o.map((e,n)=>t.set({["".concat(g).concat(n)]:e}));return await Promise.all([t.set({["".concat(g,"metadata")]:r}),...a]),!0}catch(e){return console.error("[SAVE_CHUNKS] Error:",e),!1}}(n);if(i)try{await async function(e){try{const t=chrome.storage[await u()],n=(await t.get(o.a))[o.a]||{},r={...a,snippets:Object(s.serializeSnippetData)(a.snippets)};return n[e||Date.now()]=r,await t.set({[o.a]:n}),!0}catch(e){return console.error("Error saving revision:",e),!1}}("Updated data")}catch(e){console.warn("[SW] Failed to save revision:",e)}return i}catch(e){return console.error("[SW] Error in notifyDataChange:",e),!1}}async function T(){try{return console.log("[SAVE_DATA] Starting save"),await w()?(console.log("[SAVE_DATA] Successfully saved data"),!0):(console.error("[SAVE_DATA] Failed to save data"),!1)}catch(e){return console.error("[SAVE_DATA] Error saving:",e),!1}}async function b(e=!1){if(!a){if(!e)return void setTimeout(()=>b(!0),100);a=o.f}if(!a.ctxEnabled)return void await chrome.contextMenus.removeAll();await chrome.contextMenus.removeAll(),await chrome.contextMenus.create({id:m,title:"Block this site",contexts:["page"]}),await chrome.contextMenus.create({id:y,title:"Create snippet from selection",contexts:["selection"]})}function I(){chrome.contextMenus.removeAll(()=>{b()}),chrome.contextMenus.onClicked.addListener((e,t)=>{e.menuItemId===m?async function(e){const t=e.url;if(n=t,h.test(null==n?void 0:n.trim())){const n=function(e){let t,n=(e=e.replace(/^(ht|f)tps?(:\/\/)?(www\.)?/,"").split("/"))[0],o=e[1];return o&&(-1!==(t=o.indexOf("?"))&&(o=o.substring(0,t)),n+="/".concat(o)),n}(t);chrome.tabs.sendMessage(e.id,{blockSite:!0,domain:n,isBlocked:i})}var n}(t):e.menuItemId===y&&e.selectionText&&function(e,t){console.log("Create snippet from selection:",e)}(e.selectionText)})}async function N(){if(l||c)console.log("[SW] Already initialized or initializing, skipping");else try{c=!0,await P(),I(),l=!0,c=!1,console.log("[SW] Service worker initialized successfully")}catch(e){console.error("Error during service worker initialization:",e),l=!1,c=!1}}chrome.runtime.onMessage.addListener((e,t,n)=>{console.log("[SW] Message received:",e),console.log("[SW] Current Data state:",a);return(async()=>{try{if(l||c){if(c)for(console.log("[SW] Waiting for initialization to complete");c;)await new Promise(e=>setTimeout(e,100))}else console.log("[SW] Starting initialization"),c=!0,await P(),l=!0,c=!1;if("getSnippetContent"===e.type){console.log("[SW] Handling Google Docs snippet request:",e.snippetName);try{const t=(e,n)=>{if(!e||!e.list)return null;for(const o of e.list){if(o instanceof r.c&&o.name===n)return o;if(o instanceof r.a){const e=t(o,n);if(e)return e}}return null},o=t(a.snippets,e.snippetName);o?(await async function(e){try{return await navigator.clipboard.writeText(e),!0}catch(e){return console.error("Failed to write to clipboard:",e),!1}}(o.body),n({success:!0})):n({success:!1,error:"Snippet not found"})}catch(e){console.error("[SW] Error handling Google Docs snippet:",e),n({success:!1,error:e.message})}return}if(e.getData||e.giveData||"getData"===e.type){console.log("[SW] Handling getData request");const e={...a,snippets:Object(s.serializeSnippetData)(a.snippets)};return console.log("[SW] Sending data response:",{hasData:!!e,hasSnippets:!(null==e||!e.snippets)}),void n(e)}if(e.getBytesInUse){console.log("[SW] Handling getBytesInUse request");try{const e=chrome.storage[await f()],t=await e.getBytesInUse();console.log("[SW] Storage bytes in use:",t),n({bytes:t})}catch(e){console.error("[SW] Error getting bytes in use:",e),n({bytes:0})}return}if("updateStorage"===e.type){var t,o;console.log("[SW] Handling storage update:",{key:null===(t=e.data)||void 0===t?void 0:t.key,hasValue:!(null===(o=e.data)||void 0===o||!o.value)});try{const t=chrome.storage[await f()];await t.set({[e.data.key]:e.data.value}),console.log("[SW] Storage updated successfully"),n({success:!0})}catch(e){console.error("[SW] Storage update error:",e),n({success:!1,error:e.message})}return}if("createSnippet"===e.type){console.log("[SW] Handling create snippet request:",e.data);const t=await async function(e,t){try{var n,o,a,i,l,c,p,u,d;if(console.log("[CREATE_SNIPPET] Starting creation with data:",{snippetName:null==e?void 0:e.name,snippetBody:(null==e||null===(n=e.body)||void 0===n?void 0:n.substring(0,50))+"...",folderPath:null==e?void 0:e.folderPath,rootDataExists:!!t,rootSnippetsExists:!(null==t||!t.snippets),rootSnippetsType:null==t||null===(o=t.snippets)||void 0===o||null===(o=o.constructor)||void 0===o?void 0:o.name,rootSnippetsName:null==t||null===(a=t.snippets)||void 0===a?void 0:a.name}),null==e||!e.name||null==e||!e.body)throw new Error("Invalid snippet data: name and body are required");t.snippets instanceof r.a||(console.log("[CREATE_SNIPPET] Converting root snippets to Folder instance"),t.snippets=Object(s.deserializeSnippetData)(t.snippets));const f=new r.c(e.name,e.body);console.log("[CREATE_SNIPPET] Created new snippet instance:",{name:f.name,type:f.type,bodyLength:null===(i=f.body)||void 0===i?void 0:i.length});let E=t.snippets;if(console.log("[CREATE_SNIPPET] Initial target folder:",{name:null===(l=E)||void 0===l?void 0:l.name,type:null===(c=E)||void 0===c?void 0:c.type,isFolderInstance:E instanceof r.a,hasListProperty:!(null===(p=E)||void 0===p||!p.list),listLength:null===(u=E)||void 0===u||null===(u=u.list)||void 0===u?void 0:u.length}),null!==(d=e.folderPath)&&void 0!==d&&d.length){console.log("[CREATE_SNIPPET] Resolving folder path:",e.folderPath);for(const t of e.folderPath){console.log("[CREATE_SNIPPET] Looking for folder:",t);const e=E.list.find(e=>e instanceof r.a&&e.name.toLowerCase()===t.toLowerCase());if(!e)throw console.error("[CREATE_SNIPPET] Folder not found:",{searchName:t,currentFolderName:E.name,availableFolders:E.list.filter(e=>e instanceof r.a).map(e=>e.name)}),new Error("Folder not found: ".concat(t));E=e,console.log("[CREATE_SNIPPET] Found next folder:",{name:E.name,type:E.type,listLength:E.list.length})}}else console.log("[CREATE_SNIPPET] No folder path specified, using root folder");if(E.list.some(t=>t.name.toLowerCase()===e.name.toLowerCase()))throw new Error('Snippet with name "'.concat(e.name,'" already exists in this folder'));return E.list.push(f),r.a.setIndices(t.snippets),console.log("[CREATE_SNIPPET] Successfully created snippet:",f),{success:!0,snippet:f}}catch(e){return console.error("[CREATE_SNIPPET] Error:",e),{success:!1,error:e.message}}}(e.data,a);return t.success&&(await T()||(t.success=!1,t.error="Failed to save data")),void n(t)}if("editSnippet"===e.type){console.log("[SW] Handling edit snippet request:",e.data);const t=await async function(e,t){try{var n;if(console.log("[EDIT_SNIPPET] Starting edit:",{data:e,rootData:t}),null==e||!e.snippetId||!(null!=e&&e.name||null!=e&&e.body||null!=e&&e.folderPath))throw new Error("Invalid edit data: snippetId and at least one change (name, body, or folderPath) required");let o=t.snippets,s=null,a=null;if(function t(n){for(let o=0;o<n.list.length;o++){const i=n.list[o];if(i instanceof r.c&&i.name===e.snippetId)return s=i,a=n,!0;if(i instanceof r.a&&t(i))return!0}return!1}(o),!s)throw new Error('Snippet "'.concat(e.snippetId,'" not found'));if(null!==(n=e.folderPath)&&void 0!==n&&n.length){let n=t.snippets;for(const t of e.folderPath){const e=n.list.find(e=>e instanceof r.a&&e.name.toLowerCase()===t.toLowerCase());if(!e)throw new Error("Target folder not found: ".concat(t));n=e}const o=a.list.indexOf(s);-1!==o&&a.list.splice(o,1),n.list.push(s)}return e.name&&(s.name=e.name),e.body&&(s.body=e.body),r.a.setIndices(t.snippets),console.log("[EDIT_SNIPPET] Successfully edited snippet:",s),{success:!0,snippet:s}}catch(e){return console.error("[EDIT_SNIPPET] Error:",e),{success:!1,error:e.message}}}(e.data,a);return t.success&&(await T()||(t.success=!1,t.error="Failed to save data")),void n(t)}if("deleteSnippet"===e.type){console.log("[SW] Handling delete snippet request:",e.data);const t=await async function(e,t){try{if(console.log("[DELETE_SNIPPET] Starting deletion:",{data:e,rootData:t}),null==e||!e.snippetId)throw new Error("Invalid delete data: snippetId is required");let n=t.snippets,o=null,s=null;if(function t(n){for(let a=0;a<n.list.length;a++){const i=n.list[a];if(i instanceof r.c&&i.name===e.snippetId)return o=i,s=n,!0;if(i instanceof r.a&&t(i))return!0}return!1}(n),!o)throw new Error('Snippet "'.concat(e.snippetId,'" not found'));const a=s.list.indexOf(o);return-1!==a&&s.list.splice(a,1),r.a.setIndices(t.snippets),console.log("[DELETE_SNIPPET] Successfully deleted snippet:",e.snippetId),{success:!0}}catch(e){return console.error("[DELETE_SNIPPET] Error:",e),{success:!1,error:e.message}}}(e.data,a);return t.success&&(await T()||(t.success=!1,t.error="Failed to save data")),void n(t)}console.warn("[SW] Unknown request type:",e.type),n({success:!1,error:"Unknown request type"})}catch(e){console.error("[SW] Error handling message:",e),n({success:!1,error:e.message})}})().catch(e=>{console.error("[SW] Fatal error in message handler:",e),n({success:!1,error:e.message})}),!0}),chrome.runtime.onInstalled.addListener(e=>{chrome.storage.local.set({extensionUpdated:!0}),chrome.action.setBadgeText({text:"NEW"}),N().catch(console.error)}),chrome.action.onClicked.addListener(()=>{chrome.runtime.openOptionsPage()}),chrome.tabs.onActivated.addListener(e=>{b()}),chrome.tabs.onUpdated.addListener((e,t,n)=>{"complete"===t.status&&b()}),N().catch(console.error),chrome.runtime.onStartup.addListener(()=>{console.log("[SW-DEBUG] onStartup triggered"),P().then(()=>{var e,t;console.log("[SW-DEBUG] Data after startup:",{isInitialized:l,hasData:!!a,hasSnippets:!(null===(e=a)||void 0===e||!e.snippets),snippetsType:null===(t=a)||void 0===t||null===(t=t.snippets)||void 0===t||null===(t=t.constructor)||void 0===t?void 0:t.name})})}),chrome.runtime.onInstalled.addListener(()=>{console.log("[SW-DEBUG] onInstalled triggered"),P().then(()=>{var e,t;console.log("[SW-DEBUG] Data after install:",{isInitialized:l,hasData:!!a,hasSnippets:!(null===(e=a)||void 0===e||!e.snippets),snippetsType:null===(t=a)||void 0===t||null===(t=t.snippets)||void 0===t||null===(t=t.constructor)||void 0===t?void 0:t.name})})}),chrome.runtime.onSuspend.addListener(()=>{var e,t;console.log("[SW-DEBUG] Service worker suspending, current data:",{isInitialized:l,hasData:!!a,hasSnippets:!(null===(e=a)||void 0===e||!e.snippets),snippetsType:null===(t=a)||void 0===t||null===(t=t.snippets)||void 0===t||null===(t=t.constructor)||void 0===t?void 0:t.name})}),chrome.runtime.onMessage.addListener((e,t,n)=>{if("inspectStorage"===e.type)return async function(){try{const e=await f(),t=chrome.storage[e],n=await new Promise(e=>{t.get(null,t=>e(t))});console.log("[STORAGE_INSPECT] Storage type:",e),console.log("[STORAGE_INSPECT] All storage keys:",Object.keys(n)),n[o.e]?console.log("[STORAGE_INSPECT] UserSnippets content:",n[o.e]):console.log("[STORAGE_INSPECT] UserSnippets not found");const r=Object.keys(n).filter(e=>e.startsWith(g));r.length>0?(console.log("[STORAGE_INSPECT] Found chunked data:"),console.log("- Metadata:",n["".concat(g,"metadata")]),console.log("- Number of chunks:",r.length-1)):console.log("[STORAGE_INSPECT] No chunked data found");const s=await new Promise(e=>{t.getBytesInUse(null,t=>e(t))});return console.log("[STORAGE_INSPECT] Total bytes in use:",s),n}catch(e){return console.error("[STORAGE_INSPECT] Error:",e),null}}().then(e=>{n({success:!0,data:e})}),!0})},2:function(e,t,n){"use strict";function o(){this.matchesUnique=function(e){return this.name.toLowerCase()===e.toLowerCase()},this.matchesNameLazy=function(e){return new RegExp(e,"i").test(this.name)},this.matchesLazy=function(e){return new RegExp(e,"i").test(this.name+this.strippedBody)},this.matchesWord=function(e){return new RegExp("\\b".concat(e,"\\b"),"i").test(this.name+this.strippedBody)},this.remove=function(e){const t=e.getUniqueObjectIndex(this.name,this.type),n=t[t.length-1];this.getParentFolder(e).list.splice(n,1),s.setIndices(e)},this.getParentFolder=function(e){let t=e.getUniqueObjectIndex(this.name,this.type),n=e;for(let e=0;e<t.length-1;e++)n=n.list[t[e]];return n}}function r(e,t,n){this.name=e||"",this.body=t||"",this.timestamp=n||Date.now(),this.type=o.SNIP_TYPE}function s(e,t,n){this.name=e||"",this.type=o.FOLDER_TYPE,this.timestamp=n||Date.now(),this.list=Array.isArray(t)?t:[]}n.d(t,"a",function(){return s}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return o}),o.FOLDER_TYPE="folder",o.SNIP_TYPE="snip",r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.toJSON=function(){return{type:this.type,name:this.name,body:this.body,timestamp:this.timestamp}},r.fromObject=function(e){if(!e||!e.name)return null;const t=new r(e.name,e.body);return t.timestamp=e.timestamp?"number"==typeof e.timestamp?e.timestamp:Date.parse(e.timestamp.substring(11)):Date.now(),t},s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.getUniqueObjectIndex=function(e,t){if(!e||!t)return[];const n=[];for(let r=0;r<this.list.length;r++){const s=this.list[r];s&&s.matchesUnique&&s.matchesUnique(e)&&s.type===t&&(n.push(r),s.type===o.FOLDER_TYPE&&n.push(...s.getUniqueObjectIndex(e,t)))}return n},s.prototype.listSnippets=function(){const e=[],t=n=>{n&&(n.type===o.SNIP_TYPE?e.push(n):n.type===o.FOLDER_TYPE&&Array.isArray(n.list)&&n.list.forEach(t))};return this.list.forEach(t),e},s.prototype.toJSON=function(){return{type:this.type,name:this.name,timestamp:this.timestamp,list:this.list.map(e=>e instanceof s||e instanceof r?e.toJSON():e)}},s.MAIN_SNIPPETS_NAME="Snippets",s.SEARCH_RESULTS_NAME="Search Results in ",s.indices={[o.FOLDER_TYPE]:{},[o.SNIP_TYPE]:{}},s.setIndices=function(e){function t(e,t,n){t?s.indices[e][t.toLowerCase()]=n:console.warn("[SET_INDICES] Attempted to set index with empty name:",{type:e,indexArray:n})}s.indices={[o.FOLDER_TYPE]:{},[o.SNIP_TYPE]:{}},e&&function e(n,r){if(!n||!n.list)return void console.warn("[SET_INDICES] Invalid folder in repeat:",n);let s=0;t(n.type,n.name,r),n.list.forEach(n=>{if(!n||!n.type)return void console.warn("[SET_INDICES] Invalid list item:",n);const a=r.concat(s);n.type===o.FOLDER_TYPE?e(n,a):t(n.type,n.name,a),s++})}(e,[])},s.fromObject=function(e,t=!1){if(!e)return null;const n=new s(t?s.MAIN_SNIPPETS_NAME:e.name,[],e.timestamp);return e.list&&Array.isArray(e.list)&&e.list.forEach(e=>{if(e.type===o.FOLDER_TYPE){const t=s.fromObject(e);t&&n.list.push(t)}else if(e.type===o.SNIP_TYPE){const t=r.fromObject(e);t&&n.list.push(t)}}),n},s.fromArray=function(e,t=!1){if(!e||!Array.isArray(e))return null;let n,a,i;t||"r"===e[0]||e[0]===s.MAIN_SNIPPETS_NAME?("r"===e[0]?[,a,...i]=e:e[0]===s.MAIN_SNIPPETS_NAME?[,a,...i]=e:[a,...i]=e,n=s.MAIN_SNIPPETS_NAME):[n,a,...i]=e;const l=new s(n,[],a);return l.type=o.FOLDER_TYPE,i.forEach(e=>{if(Array.isArray(e))if(e.length>2){const t=s.fromArray(e);t&&l.list.push(t)}else{const[t,n]=e,s=new r(t,"",n);s.type=o.SNIP_TYPE,l.list.push(s)}else if("object"==typeof e)if("r"===e.type||"a"===e.type||e.type===o.FOLDER_TYPE){const t=new s(e.name,[],e.timestamp);t.type=o.FOLDER_TYPE,e.list&&e.list.forEach(e=>{if("r"===e.type||"a"===e.type||e.type===o.FOLDER_TYPE){const n=s.fromObject(e);n&&t.list.push(n)}else{const n=r.fromObject(e);n&&t.list.push(n)}}),l.list.push(t)}else{const t=r.fromObject(e);t&&l.list.push(t)}}),l},s.getDefaultSnippetData=function(){const e=Date.now(),t=new s(s.MAIN_SNIPPETS_NAME,[],e);return t.list=[new s("sampleFolder",[],e),new r("sampleSnippet","Hello new user! Thank you for using DotExpander!\n\nThis is a sample snippet. Try using it on any webpage by typing 'sampleSnippet' (snippet name; without quotes), and press the hotkey (default: Shift+Space), and this whole text would come in place of it.",e),new r("letter","(Sample snippet to demonstrate the power of DotExpander snippets; for more detail on Placeholders, see the Help section)\n\nHello %name%,\n\nYour complaint number %complaint% has been noted. We will work at our best pace to get this issue solved for you. If you experience any more problems, please feel free to contact at me@organization.com.\n\nRegards,\n%my_name%,\nDate: [[%d(D-MM-YYYY)]]",e),new r("brb","be right back",e),new r("my_sign","<b>DotExpander &#169;</b>\n<i>Created by DoctorDurant LLC</i>\n<u>james@doctordurant.com</u>",e),new r("dateArithmetic","Use this snippet in any webpage, and you'll see that the following: [[%d(Do MMMM YYYY hh:m:s)]] is replaced by the current date and time.\n\nMoreover, you can perform date/time arithmetic. The following: [[%d(D+5 MMMM+5 YYYY+5 hh-5:m-5:s-5)]] gives the date, month, year, forward by five; and hour, minutes, and seconds backward by 5.\n\nMore info on this in the Help section.",e),new r("urlMacro","Use the URL macro (details in the Help page) to retrieve parts of the URL of the active webpage. For example, [[%u(host)]] gives the hostname.",e)],t}},8:function(e,t,n){"use strict";n.d(t,"d",function(){return o}),n.d(t,"c",function(){return r}),n.d(t,"f",function(){return s}),n.d(t,"e",function(){return a}),n.d(t,"b",function(){return i}),n.d(t,"a",function(){return l});n(2);const o=102400,r=5242880,s={snippets:null,blockedSites:[],charsToAutoInsertUserList:[["(",")"],["{","}"],['"','"'],["[","]"]],dataVersion:1,language:"English",hotKey:["shiftKey","Tab"],dataUpdateVariable:!0,matchDelimitedWord:!0,tabKey:!1,snipNameDelimiterList:" @#$%&*+-=(){}[]:\"'/_<>?!.,",omniboxSearchURL:"https://www.google.com/search?q=SEARCH",wrapSelectionAutoInsert:!0,ctxEnabled:!0,dotPhrasesEnabled:!0},a="UserSnippets",i="storageType",l="revisions"}});